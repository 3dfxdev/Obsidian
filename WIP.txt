
WORK IN PROGRESS
================



Closets
-------

+  really want to add them _AFTER_ large traps/cages have been
   added (and after outdoor borders too)

-  locked switch closet

IDEA : a special number for "THE switch action" (e.g. 888)



>>  hallway stairs



Map Borders
-----------

++  have different things in each zone [ upto two ]

++  Plains (flat or gently sloping)
    have trees, occasional big rock

+  Canyon : sides 2/8 of map have tall cliffs, sides 4/6 are short/water

+  Water : have a cliff at edge of map  [ or at dist >= 3 or so ]

-  Mountains : add some largish flat areas (away from map and away from edges)
               with a lot more of the scenic object (or a different one)

-  Mountains : make larger groups at further distances

-  inverse mountain?  i.e. like level is sitting on top of one

-  Water : have some islands

-  mixing Mountains + Water or Plains + Water
   (the water forms small lakes or a river, touching the normal map)

-  Water : waterfalls from nearby mountains or the far away cliff



Sinks
-----

+  decide them fairly early, e.g. Room_add_sinks() -- or in layout code
   
-  add "light" to ceilings with a light texture

-  detect the "whole seed" part early (easy: all corners are inner points)
   and [for floors only] give the seed a new floor_h/floor_mat, and honor
   that floor_h when adding importants or decorative prefabs.

-  monsters: should not straddle the line between normal floor and sink
   [ draw that line in spot code ] and ideally would have correct 'Z'

-  probably should mark seeds (or whatever) so know where can place
   decorative prefabs.





Monster defs : min weapon level needed [esp. for Vile/Bosses ]
-  player weapon in three states : no have / getting / have it
   ("getting" applies to whole zone)
   when "getting" it, allow monster but reduce prob/density
   (allow monster for guard)

(a) Support min_weapon and weap_needed for GUARD monsters


Items:
-  rework distribution logic
   ( get_previous_locs is broken atm)



Secrets....
!!  make the secret door (or fence, etc)



Traps....
-  second pass : traps ON WAY BACK to the ...

+  make more traps over a episode/game



Porches :
  -  a low solid ceiling with posts at seed corners

  -  not too big, not too much inner space (same criterion as hallways)

  -  used indoors or outdoors

  -  can convert an outdoor hallway if mostly surrounded by outdoors
     (and no higher floors).  can use railing here instead of posts

  -  otherwise outdoor usage should have building on a side, sky on the
     other side [ scan the edge loop, want two contiguous groups ]

  -  floor MUST be >= nearby floors (ignoring void / walled junctions)
     [ do it via floor-heights algorithm)

  -  strong preference for areas with a connection, esp. a locked one


SORT OUT : where 'facade_mat' is stored, how is accessed
  - basically, each indoor room (cave or building) has a facade_mat
    (defaulting to ZONE.building_facade or ZONE.cave_mat)

  - for outdoor<-->outdoor, use the fence texture (ZONE.fence_mat)

  - for void, use area 'kind'



implement "arch" junction / prefab

area/room with key/exit/etc are good for windows

if area floor is >= all neighbors, sometimes mark as "want rail" (instead of fence)

Courtyard floor should be > Landscape floor.



Fake fences:
  -  height is consistent across the zone
     (e.g. half way between average area floor_h and sky_group.h)
     don't make in an area if height of fence would be < 64

  -  texture is consistent across the zone
     (pick randomly a la fence_mat, allow to be same as fence_mat)

  -  location: between 1 and 3 seeds (no angle > 180 between them)
     and solid walls on each side and angle on each side <= 135

  -  stretch goal : if void behind seed(s), have a transition prefab
     (i.e. showing solid wall above the fence)
     if sky much higher, occasionally stick a cage monster there



Q/ use CC-BY-3 or 4 for all prefabs / images / prebuilt maps


IDEA: have a single thing number for "coop player"
      [ i.e. treat player entities more abstractly ]


-  sometimes make a floor (its side) use same material as top (not room wall)



Doors
-  support wide doors [normal / locked]
-  make wide prefab with a switch in it [normal door]
-  texturing on door prefabs (for HELL, URBAN themes)



CTF and DM
----------

-  Cycles !
   -  also: don't kill long hallways, allow to connect to same room
      [ OR : place a teleporter at the end ]

-  Weapons / Big items
   -  decide mix of weapons and big items
   -  place big stuff as far apart as possible
   -  big item is often the focus point of an area/room

-  Player starts!
   -  less travelled areas (with cover e.g. near a wall)
   -  near a weapon

