
WORK IN PROGRESS
================


CLOSETS:

+  monster trap!

-  item closet



STAIRS:

+  need to support building the ceiling "normally"
   [ specified by prefab ]

-  choose prefabs earlier, probably during floor/ceil heights



JOINERS:

+  make them!



PREFAB SYSTEM

-  the "where" fields are rubbish, simplify it, perhaps:

   * "edge" : used at an EDGE object (or straddling it)
              examples: doors, fences, windows, pictures, walls

   * "rect" : occupies a seed rectangle
              examples: stairs, closets, joiners,

   * "point" : prefab is centered at (0,0), can place anywhere
               examples: crate, pillar, free-standing switch

+  figure out semantics of seed_w/seed_h and ROTATING prefabs
   -  if there is a natural direction (e.g. closet facing into room),
      then it is simple (rotation not possible)

+  define 'seed_w/h' in a prefab to be minimum size

-  allow 'max_seed_w, max_seed_h' to be maximum size
   __OR__ : seed_w = { 1,3 }



SHAPE GRAMMARS:

   -  each level has different factors for all grammar rules

      factor = rand.pick({ 0.1, 0.3, 0.7, 1.0 })
      if rand.odds(50) then factor = 1 / factor end
      new_prob = old_prob * factor

   idea: have "elements" table indexed by a seed coord

      elements =
      {
        3_4  = { .... }
        2_1B = { ... }
        2_1T = { ... }
      }

   Q/ can do windows using them?  pictures??

   +  allow "free-range cages" (i.e. not using rects / prefabs)

   -  allow TWO conns into a new room (become F1/F2 in CONN object)

   idea:  support 'H' for hallways

   +  prune / re-use rooms which remain small, and hallways which
      never end up anywhere else

   +  symmetrical rooms
      +  join mirrored seeds with 'peer' field

      +  a way to score "straddling" patterns higher
         [ they are a very good place for some stuff, e.g. exits ]
         [[ only first usage of SPROUT/DECOR needs to score higher ]]

      -  SPROUT pass : try some without a mirrored half

      -  SPROUT: if mirrored and new rooms touch/overlap, only create
                 a single room

   idea:  'O' used in matches for "open" part of room (floor/stair/liquid)

   idea:  'a', 'b', 'c' matches anything but "1", "2", "3"
          Q/ does "anything" included empty space / other rooms?

   idea:  CYCLE pass (after SPROUT) for multiple paths

   idea:  for CTF, create one big room with "rotate" symmetry
          [ interleave GROW and SPROUT passes ]
          [[ "new_room" becomes "new_area" but acting like a new room ]]


MISC:

-  titlepic backgrounds (current and new) :
   determine ones for official package, put rest in an addon

+  face direction for switches

