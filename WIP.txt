
WORK IN PROGRESS
================


Miscellaneous
-------------

!!  RAILS:
    - re-instate rail brushes
    - only uses the OUTSIDE of the brush (need TWO for a double sided railing)
    - prefabs set an absolute X and Y offset
    - default X offset is NONE (auto align)
    - default Y offset is zero
    - brushlib.rail_brush() and rail_brush_pair()

+  fence/bars : needs to vertically expand like a normal fence
                so that player cannot jump through the gap

-  Traps prefabs have an "action_kind", use matching action
   for the trigger lines.   [ "open" vs "lower" ]
   Q/ how to pick the matching action
   A/ decide it for the trapped thing early, require trap prefabs tp
      have a matching value

+  lighting in caves mucked up?  [ check Ambient_push/pop ]

-  sprouts from symmetrical rooms : often skip a side

-  have a CHUNK_CLASS

DONE:  proper system for actions of remote switches

-  internal fences (esp. for outdoor rooms)



Hallway System
--------------

-  not considered "wallish" (no triangular filler) ?

+  finish the "deuce" hallway pieces

+  for 2x2 hallway, have 2x1 terminator pieces

-  texturing for pieces  [ hallway room themes ]

+  support over-sized pieces (e.g. 3x1 and 3x3 for vent)
   [ will need all I/L/T/P shapes ]
   [[ good for traps! ]]

-  support pieces with windows

-  be real nice to have pieces which are wall on one
   side and open on the other (with sky ceiling OR like nearby ceiling)
   [ BUT: will need to expand vertically ]

   also: open on ALL sides  (mainly I and L pieces)

-  IDEA: shape = { "mid", "-", "mid", "-" }

   keywords can be: "-"     (no connections)
                    "mid"   (middle of side)
                    "left"
                    "right"
                    "split" (one on left, one on right)
                    "window"
                    "open"

       function REMAP(pos)
          if pos == "left"  then return "right" end
          if pos == "right" then return "left" end
          return pos
       end

       function mirror_X_complex_shape(SH)
          SH[4], SH[6] = REMAP(SH[6]), REMAP(SH[4])
          SH[2], SH[8] = REMAP(SH[2]), REMAP(SH[8])
       end

       function mirror_Y_complex_shape(SH)
          SH[2], SH[8] = REMAP(SH[8]), REMAP(SH[2])
          SH[4], SH[6] = REMAP(SH[4]), REMAP(SH[6])
       end

       function transpose_complex_shape(SH)
          SH[2], SH[4] = REMAP(SH[4]), REMAP(SH[2])
          SH[8], SH[6] = REMAP(SH[6]), REMAP(SH[8])
       end



Scenic Borders
--------------

+  proper ZONE handling
   [ note : zones do NOT exist during divvy_up_borders! ]

-  assign unused border areas to a room
   [ do it later than divvy_up ?? ]

+  different styles:
   - mountainy areas  (w/ trees or torches)
   - cavey/liquidy areas
   - fenced off pools from V7-WEIRD
   - fancy fences



PARKS
-----

+  sky handling:
   -  ensure the heighest FLOOR contributes to zone.sky_h

+  height variation  [ different areas ]

-  texturing
   [ in constructed outdoors, don't use natural tex like GRASS
     except in the lowest area ]

-  add a style for it, decide room properly



Quake3 CSG Code
---------------

-  brushlib function to visit side faces, and if they
   contain u1/u2/v1/v2 then compute the uv_mat

-  brushlib function to visit top/bottom faces, and generate
   a uv_mat if the sides contain tu/tv/bu/bv values

