
V4 TODO
=======

Current Work
------------

MONSTERS:

(1) have the room palette

(2) simplify selection of room palette:
    -  use info.prob
    -  basic criterion is: harder monsters occur later
    -  want harder monsters in KEY/EXIT rooms

(3) give each mon a 'density' value:
    -  use info.density (NOT info.prob)
    -  adjust with damage/time/along/level/purpose
    -  when all monsters have a density, normalise by dividing by total

(4) give each room a TOTAL count (adjust for along, purpose)
    -  want[mon] = total * density[mon]


!!  skin lists, not skin1/sk2/yada

!!  u1..v2 for texture coords on brushes

!!  remove flavored brushes :-(

-  fix inner/outer tex on door and window prefabs

-  fix window prefabs: raise up by 32 units or whatever

>>>  straddler sizes affect TWO rooms at same time
     (implications for edge and corner layouting)

-  consider if floor fabbing can do heights on-the-fly instead of
   a separate pass at the end.

+  in a large (multi-section) room, if any section has no "events"
   (a connection or switch or key or major item) then give it a
   nice pickup item (etc) or at least a walk space.

+  implement "fence" rects in prefab neighborhoods.
   make sure they (a) don't split walk/nosplit (b) update heights
   (liquids too)

+  implement "nosplit" areas, which are like "walk" areas in that
   they must not be split, but which aren't considered to be
   player destinations.

+  fix items and monsters on fences / staircases


!!  EDGE.max_deep = (width - 128) / 2   [Including any walk/air area]

    For 2  seed wide room, thickest door is  64 units + 64 walk
    For 3  seed wide room, thickest door is 160 units + 64 walk
    For 4+ seed wide room, thickest door is 256 units + 64 walk


///////////////////////

-  support floor prefabs in non-monotonic rooms

x  "thin wall fabs" which can be placed inside "fat wall fabs"
   (including corners).  

-  consider allowing "minor" wall prefabs to be decided during/after
   floor fabbing.  In particular to allow a floor prefab to supply
   a lift or staircase against the wall (in even in a corner),
   perhaps also for liquidy stuff.

DONE: allow more than one safe zone per floor

-  floor prefabs (ETC) should be as small as possible

Note: allocated middlers (e.g. key pedestal) should not exist
      inside the safe zone.  If their section is small, just inhibit
      subdivision, if large then have upto 4 safe zones around it.

?  remove R.wall_space, merely collect the polygons and test them

-  3D floor prefab is often a TRIPLE splitter
   (left side, right bottom, right top)

Idea: "flush depth" of walls



Release Goals
-------------

Games:

DOOM and QUAKE only


Layout:

+  rooms with multiple layers

+  corner prefabs
       - normal
       - curved
       - big diagonal
       - torch in niche
       - jutting out torch 

+  wall prefabs:
       - cage
       - monster closet
       - secret closet
       - torch
       - picture
       - teleporter
       - item niche
 
+  middle prefabs:
       - cage
       - pillar
       - variety of crates
       - fountain (outdoor)
       - a couple techy ones

+  light brushes for DOOM, clipped to room:
   (a) have group of rectangles to clip to
   (b) clip light brush to each rectangle

+  get caves working again

-  Cross-Overs

-  small exits

-  proper system to match DOOR skins with SWITCH skins
   (allow more than a single door or single switch per lock kind)


Monsters:

DONE:  automatic 'level' for monsters if value is missing

IN PROGRESS:  fix monster quantities (too many right now)

IN PROGRESS:  increase monster quantities and toughness over course of a
              level, with extra boost for KEY and EXIT rooms.

