----------------------------------------------------------------
--  MODULE: title-pic generator
----------------------------------------------------------------
--
--  Copyright (C) 2015 Andrew Apted
--
--  This program is free software; you can redistribute it and/or
--  modify it under the terms of the GNU General Public License
--  as published by the Free Software Foundation; either version 2
--  of the License, or (at your option) any later version.
--
--  This program is distributed in the hope that it will be useful,
--  but WITHOUT ANY WARRANTY; without even the implied warranty of
--  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
--  GNU General Public License for more details.
--
----------------------------------------------------------------

TITLE_GEN = { }


-- The shapes of these characters are based on the DejaVu TTF font.

TITLE_GEN.letter_shapes =
{
  ["-"] =
  {
    lines = { 270, 240,  351, 240, -1,-1,
      0, 0 }
  }

  [":"] =
  {
    lines = { 300, 210,  320, 210, -1,-1,
      300, 270,  320, 210, -1,-1,
      0, 0 }
  }

  ["'"] =
  {
    lines = { 310, 87,  310, 115,  300, 135,  290, 145, -1,-1,
      0, 0 }
  }

  ["A"] =
  {
    lines = { 213, 326,  310, 89,  407, 326, -1,-1,
      247, 247,  374, 247, -1,-1,
      0, 0 }
  }

  ["B"] =
  {
    lines = { 249, 327,  249, 87,  332, 87,  355, 94,  379, 119,  383, 141,  376, 174,  353, 193,  319, 198,  249, 198, -1,-1,
      319, 198,  373, 216,  389, 239,  392, 260,  383, 299,  357, 322,  332, 327,  249, 327, -1,-1,
      0, 0 }
  }

  ["C"] =
  {
    lines = { 407, 107,  369, 87,  332, 81,  281, 93,  237, 143,  227, 201,  235, 260,  261, 307,  297, 328,  332, 334,  371, 327,  408, 309, -1,-1,
      0, 0 }
  }

  ["D"] =
  {
    lines = { 227, 327,  227, 87,  296, 87,  345, 97,  385, 125,  403, 173,  406, 203,  402, 253,  379, 297,  331, 323,  301, 327,  227, 327, -1,-1,

      0, 0 }
  }

  ["E"] =
  {
    lines = { 383, 327,  251, 327,  251, 87,  380, 87, -1,-1,
      251, 198,  376, 198, -1,-1,
      0, 0 }
  }

  ["F"] =
  {
    lines = { 261, 327,  261, 87,  376, 87, -1,-1,
      261, 198,  364, 198, -1,-1,
      0, 0 }
  }

  ["G"] =
  {
    lines = { 332, 217,  401, 217,  401, 316,  361, 331,  324, 334,  281, 326,  243, 300,  219, 257,  213, 211,  224, 147,  250, 107,  294, 87,  323, 84,  372, 89,  400, 103, -1,-1,
      0, 0 }
  }

  ["H"] =
  {
    lines = { 231, 327,  231, 87, -1,-1,
      231, 199,  391, 199, -1,-1,
      391, 327,  391, 87, -1,-1,
      0, 0 }
  }

  ["I"] =
  {
    lines = { 310, 327,  310, 87, -1,-1,
      270, 327,  350, 327, -1,-1,
      270, 87,   350, 87, -1,-1,
      0, 0 }
  }

  ["J"] =
  {
    lines = { 270, 87,   350, 87, -1,-1,
      312, 87,   312, 325,  304, 367,  290, 384,  369, 391,  243, 391,  270, 87,   350, 87, -1,-1,
      0, 0 }
  }

  ["K"] =
  {
    lines = { 263, 327,  263, 87, -1,-1,
      274, 199,  393, 87, -1,-1,
      274, 199,  405, 327, -1,-1,
      0, 0 }
  }

  ["L"] =
  {
    lines = { 391, 327,  264, 327,  264, 87, -1,-1,
      0, 0 }
  }

  ["M"] =
  {
    lines = { 224, 327,  224, 87,  230, 87,  310, 276,  390, 87,  396, 87,  396, 327, -1,-1,
      0, 0 }
  }

  ["N"] =
  {
    lines = { 231, 327,  231, 87,  237, 87,  370, 327,  376, 327,  376, 87, -1,-1,
      0, 0 }
  }

  ["O"] =
  {
    lines = { 213, 205,  222, 147,  249, 104,  283, 85,  311, 82,  363, 95,  395, 132,  408, 174,  411, 209,  401, 268,  371, 312,  339, 329,  310, 333,  276, 326,  237, 299,  218, 254,  213, 205, -1,-1,
      0, 0 }
  }

  ["P"] =
  {
    lines = { 256, 327,  256, 87,  326, 87,  359, 97,  381, 124,  386, 151,  377, 189,  348, 214,  325, 218,  256, 218, -1,-1,
      0, 0 }
  }

  ["Q"] =
  {
    lines = { 213, 205,  222, 147,  249, 104,  283, 85,  311, 82,  363, 95,  395, 132,  408, 174,  411, 209,  401, 268,  371, 312,  339, 329,  310, 333,  276, 326,  237, 299,  218, 254,  213, 205, -1,-1,
      344, 335,  380, 374, -1,-1,
      0, 0 }
  }

  ["R"] =
  {
    lines = { 256, 327,  256, 87,  326, 87,  359, 97,  381, 124,  386, 151,  377, 189,  348, 214,  325, 218,  256, 218, -1,-1,
      331, 225,  351, 238,  379, 320,  400, 327, -1,-1,
      0, 0 }
  }

  ["S"] =
  {
    lines = { 235, 312,  277, 327,  310, 333,  345, 326,  373, 307,  384, 269,  375, 238,  341, 213,  273, 195,  247, 173,  240, 140,  250, 107,  278, 87,  312, 82,  351, 87,  380, 102, -1,-1,
      0, 0 }
  }

  ["T"] =
  {
    lines = { 311, 327,  311, 87, -1,-1,
      211, 87,  411, 87, -1,-1,
      0, 0 }
  }

  ["U"] =
  {
    lines = { 230, 87,  230, 241,  236, 286,  253, 313,  282, 329,  309, 333,  336, 330,  363, 317,  380, 296,  389, 241,  389, 87, -1,-1,
      0, 0 }
  }

  ["V"] =
  {
    lines = { 213, 87,  303, 327,  309, 327,  410, 87, -1,-1,
      0, 0 }
  }

  ["W"] =
  {
    lines = { 170, 87,  231, 327,  241, 327,  303, 87, 311, 87,  369, 327, 379, 327,  441, 87, -1,-1,
      0, 0 }
  }

  ["X"] =
  {
    lines = { 223, 329,  389, 87, -1,-1,
      234,  87,  397, 327, -1,-1,
      0, 0 }
  }

  ["Y"] =
  {
    lines = { 308, 328,  311, 209,  224, 87, -1,-1,
      311, 209,  395, 87, -1,-1,
      0, 0 }
  }

  ["Z"] =
  {
    lines = { 410, 327,  211, 327,  405, 87,  215, 87, -1,-1,
      0, 0 }
  }
}



function TITLE_GEN.generate_title()
  assert(GAME.title)

  -- don't bother for a single map
  if OB_CONFIG.length == "single" then
    return
  end

  -- TODO
end


----------------------------------------------------------------

OB_MODULES["title_generator"] =
{
  label = "Title Generator"

  game = { doom1=1, doom2=1 }

  hooks =
  {
    all_done = TITLE_GEN.generate_title
  }
}

