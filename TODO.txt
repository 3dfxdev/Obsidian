
TODO
====

DONE: lowering pedestal in ceiling:
      messed up because ceiling heights determined AFTER pedestal
      hence : make pedestal in Build_seed NOT layout.lua


Idea: replace 'line_kind' and 'sec_kind' with just 'kind' in area_face_c
      (similarly for 'tag', 'args' etc...)


BUG:  switch in cave may end up inaccessible (clear the seed)


Lighting:
   -  support entity.light

   -  support w_face.light (maybe even have 'light' in MATERIALS ?)

   -  have a way (module?) to control ACCURATE_LIGHTING (call it FAST)

   -  Build_shadow : don't go into next seed unless exists & outdoor

DONE:  light brushes: if value < 0, "shadow" brush

DONE:  liquids are lit


DONE: Wolf theme: ROCK4 caves (but squarey)
DONE: Wolf SILVER DOOR


DONE: Room kinds:
   (1) remove current kind values (implied by outdoor and natural)
   (2) have "normal" as well as "scenic" and "hallway" etc...

FIXED:  batch mode: if error occurs, RETURN CODE FROM MAIN

FIXED: lowering item pedestals can go into ceiling

FIXED: outdoor bars can sometimes be jumped over.
   --> make them higher _or_ another switch to lower them.


DONE ??   theming system rework


+  more supplies in start room (ammo for weapon, armor vest)

+  get small exits working again
   -  rework Build_small_exit to only use a single transform

>>>  support outer walls: building_facades in a theme def.
   - would be nice to "smooth" any odd-one-outs
   - ability to ensure both inner/outer are the same


+  single (or two?) border seeds around map
   (plus space for monster depots)
 

+  improve the jaggy edge algorithm (support corner triangles)

DONE:  supply a brush-making callback to Cave_render

DONE:  hallway detailing : mark lines as impassible


BUG: liquification of caves at a border can subvert quests



*  get more games working (Heretic, Hexen etc)

*  support for Traps, Cages, Secrets, Powerups

*  add in more scenery: lamps, computers etc

*  improve monster selection (and placement)


Natural areas:

  DONE:  CAVE: more cave wall @ building borders

  PRELIM  place monsters in walkable spots
  PRELIM  place items in walkable spots
  PRELIM  place purpose (key / switch) in open spot

  -  height changes 

  DONE:  small chance an island region becomes a lava pit

  PRELIM  proper theming (c.f. THEME.building)

  DONE:  "layering" : perform multiple 'grow + render' passes

  -  create two "combos" for caves on each map (sim. landscapes)

  -  trimming: try to avoid same material as previous one
  
  -  better bordering with outdoor areas

  -  layering: if last is "deep liquid", it bugs mon/pickup spots
     (find the spots later ??)

  -  windows facing landscapes : can it be done??

  -  MIDVINE sometimes used at cave transitions



+  review monster quantities, need some increase over the course
   of a level (like 50% more monsters at end compared to start)
   and maybe better pacing (e.g. nothing in a room occasionally).

   Also may need to create smaller room palettes for small
   quantities (i.e. Less or Scarce settings).


-  BUG: items occasionally appear on skyfences
   - finding small spots ignores sideway extents (thick[])


CSG CODE:

!!  do a proper face-creation pass (merge_face_c list
    in each merge_segment_c ?) and get proper brush
    and area_vert references.

    Hence remove the CSG2_FindXXX rubbish.

!!  DOOM: fix y_offset values

+  CSG DOOM: fix up extrafloor creation

DONE:  merge linedefs where possible

- Rail brushes: support fake 3D bridges
                (create dummy sector from brush's Z2)


q1_nodes:
  -  floor_leaf --> leaf
  ?? move floor/ceiling faces into leaf.faces (instead of leaf.floor)


