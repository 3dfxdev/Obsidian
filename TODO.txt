
V4 TODO
=======

Current Work
------------

!!  improve placement of key/switch : NOT NEAR ENTRANCE

!!  fix items and monsters on fences / staircases

+  in a large (multi-section) room, if any section has no "events"
   (a connection or switch or key or major item) then give it a
   nice pickup item (etc) or at least a walk space.

+  implement "fence" rects in prefab neighborhoods.
   make sure they (a) don't split walk/nosplit (b) update heights
   (liquids too)

+  implement "nosplit" areas, which are like "walk" areas in that
   they must not be split, but which aren't considered to be
   player destinations.

DONE: BUG : switched doors can get wrong tag  !!!
DONE: place "important stuff" before decide_windows
DONE: fix Quake button placement
DONE: multiple safe zones in neighborhood tables
DONE: prevent ceiling too low : compute min_floor (etc)


///////////////////////

-  support floor prefabs in non-monotonic rooms

x  "thin wall fabs" which can be placed inside "fat wall fabs"
   (including corners).  

-  consider allowing "minor" wall prefabs to be decided during/after
   floor fabbing.  In particular to allow a floor prefab to supply
   a lift or staircase against the wall (in even in a corner),
   perhaps also for liquidy stuff.

DONE: allow more than one safe zone per floor

-  floor prefabs (ETC) should be as small as possible

-  Fabricate: remove "fab" parameter -- get name from skin

Note: allocated middlers (e.g. key pedestal) should not exist
      inside the safe zone.  If their section is small, just inhibit
      subdivision, if large then have upto 4 safe zones around it.

?  remove R.wall_space, merely collect the polygons and test them

Idea: "flush depth" of walls



Release Goals
-------------

Games:

DOOM and QUAKE only


Layout:

+  rooms with multiple layers

+  corner prefabs
       - normal
       - curved
       - big diagonal
       - torch in niche
       - jutting out torch 

+  wall prefabs:
       - cage
       - monster closet
       - secret closet
       - torch
       - picture
       - teleporter
       - item niche
 
+  middle prefabs:
       - cage
       - pillar
       - variety of crates
       - fountain (outdoor)
       - a couple techy ones

+  light brushes for DOOM, clipped to room:
   (a) have group of rectangles to clip to
   (b) clip light brush to each rectangle

+  get caves working again

-  Cross-Overs

-  small exits

-  proper system to match DOOR skins with SWITCH skins
   (allow more than a single door or single switch per lock kind)

-  prevent escapes over fences/windows near key pedestals (etc) by
   raising the height of the fences/windows there.


Monsters:

-  use 'level' value in monster definitions,
   e.g. require LEVEL.epi_along >= (def.level - 1) / 9
   (adjust for Strength setting).

-  PARAM.episode_factor : 0 = progression continuous over whole game
                          1 = progression same in all episodes
                          (defaults to 0.5)

+  fix monster quantities, which was messed up by cave code.

   Also need some increase over the course of a level
   (like 50% more monsters at end compared to start) and
   vary the quantity (e.g. nothing in a room occasionally).

