
WORK IN PROGRESS
================


???  last_file stuff?  Default_location??


>>>  overhangs (periphs) do not take 3D floors into account


RAIL ISSUE : cannot control offsets on BACK SIDE of a brush vert

--->  need rail brushes (perhaps two for a two-sided railing??)


Extra floors

+ style_sel("ex_floors")


Layout rework:
??  the 'is_top' pattern must touch the entry_conn (if present)

+  create chunks for ALL non-cave rooms

-  CHUNK_CLASS ?   put in seed.lua

-  link chunks together

-  create chunks for flat square room
   V
-  split big chunks: 4 = 2/2  5 = 2/1/2 or 1/3/1  6 = 2/2/2  (etc)
   (maintain symmetry if chunk straddles middle of room)

-  split any chunks which contain TWO importants or conns
   (detect if horiz or vertical, and where)

IDEA:  automatically merge 2x2 seeds (if floor) into a single chunk

-  get stairs working again
-  get curved stairs working again
-  get diagonals working again

-  recursive patterns!

-  get 3d bridges working
-  get 3d floors working


Stuckies : do not use "kind = diagonal" in seeds


Border pieces:
-  fix textures on corner cage
-  only 25% chance of corner cage [apply style]
-  support "gaps" in piece sides (filled by lowest nearby sector OR next lowest sector)
-  tidy up current pieces

+  problem: piece may be inaccessible (due to max_floor_h or
   walkable seed not occurring near a border)
   ---> after layout room, detect which pieces are accessible

-  IDEA: middle seed (etc) can become place for item/start/exit/teleporter

-  support piece with spot for nice item, if room has item then
   place it there
-  support piece as start spot
-  support piece which is EXIT


Fix handling of gaps inside caves (at border of cave)
-  always do it in Cave_xxx code, NOT make_border() code
-  "cave_wall" -- support as a low fence too ("cave_fence" ?)


Bridges:
-  bridges : check two/three seeds for LONG bridges
-  have an actual bridge
-  add mon/item spots to prefabs
-  support a 3D floor [another special sector?]


Junking:
-  caves: sometimes junk a side or two
   - only at edge of map (?)
   - 1 or 2 seeds deep

-  normal junking : upto 2 seeds at edge of map


Closets and Traps:
-  can use unused seeds [inside map area]
-  can use junked parts of a room
-  can use a SOLID seed in a pattern (c.f. cage code)

-  can steal part of a nearby scenic, but require all three sides
   (and two diagonals) to remain part of scenic room


Doors
-  Door_with_bars : use it
-  make a two seed wide door prefab
-  support wide doors [normal / locked]
-  make wide prefab with a switch in it [normal door]
-  texturing on door prefabs (for HELL, URBAN themes)

