
V4 TODO
=======

Current Work
------------

!!  rework hallway generation to use the "hall channels"

!!  after hallways, perform a section nudging pass (or two)

!!  decide chunks after doing hallways

!!  make section-to-section doors be chunk aware, merge chunks
    if a door would touch two chunks
    (in worst case, all chunks in a section become a single chunk)

+  create height diffs in each room from chunks


HALLWAY STUFF

+  clean up / optimise current code

-  sometimes fork a hallway off another one

-  build all hallways AFTER all rooms
   (decide a height different first though).


FLOOR STUFF

!!  fix "air" brush handling (get Z heights right)

>>  safe zones : record where prefabs are (EDGE/corner/etc) and
                 iterate through them to shrink the safe zones.

            _OR_ create them first and update them whenever a
                 prefab gets added

>> a less recursive algorithm, once we have decided the floor
   fab and where to place it, its heights are known and fixed.

   i.e. do heights on-the-fly instead of at the end.

   It should be close to entry walk, to leave room in the rest
   of the room for further floor fabs.


!!!  clipping infinite brushes to the floor space

!!  "lava" brush kind

!!  "hole" brush kind, allow straddlers to use them too

!!  remove flavored brushes (use "hole" brushes instead)


+  support floor prefabs in non-monotonic rooms
   -  connect monotonic spaces with walk brushes
      (make a fake straddler-like prefab)

+  implement "nosplit" areas, which are like "walk" areas in that
   they must not be split, but which aren't considered to be
   player destinations.



CEILING STUFF

-  ceiling heights : check 't' in walk/air brushes 

   

WALL STUFF

!!  forget the "pick minimal, make bigger later " idea
    use room size to get a minimum and maximum size
    
+  determine formula for size of middle SPANs, basic on section size
   it should guarantee minimal prefabs will fit.

   The following is too simple, but may help:

    EDGE.max_deep = (width - 128) / 2   [Including any walk/air area]

    For 2  seed wide room, thickest door is  64 units + 64 walk
    For 3  seed wide room, thickest door is 160 units + 64 walk
    For 4+ seed wide room, thickest door is 256 units + 64 walk

-  "flush depth" for wall prefabs, encourage/force nearby walls
   to line up with it.



OTHER STUFF

!!  u1..v2 for texture coords on brushes



////////////////////////////////////////////////////////////////////



Release Goals
-------------

Games:

DOOM2 and QUAKE only


Layout:

+  wall prefabs:
       - cage
       - monster closet
       - secret closet
       - torch
       - tech lights
       - picture
       - teleporter
       # item niche
       - lift up doorway
       - lift down doorway
 
+  corner prefabs
       - normal
       - curved
       - big diagonal
       - torch in niche
       - picture

+  floor prefabs:
       - stairs
       - lift
       - L shape
       - U shape
       - bridge

+  ceiling prefabs:
       - skylight
       - tech light
       - a gothic Quake one

+  middle prefabs:
       - cage
       - pillar
       - crates
       - fountain (outdoor)
       - a couple techy ones

+  light brushes for DOOM, clipped to room:
   (a) have group of rectangles to clip to
   (b) clip light brush to each rectangle

-  small exits

