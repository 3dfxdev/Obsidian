
WORK IN PROGRESS
================


idea : each rule can specify a prob_skew
       (e.g. if 5, then can multiply or divide by rand.range(1,5))



TITLE GENERATOR

+  fix up the SUB STYLES



NEW LIGHTING:

+  compute better "AREA.lighting" values
   +  use logic like for "pressure" to make some dark rooms
   -  walls/pictures/etc with lights are summed
   -  floor/ceiling prefabs with lights also add to sum
   -  if has sink with ceiling light or sky, use an absolute value
   -  if neighbor areas is much higher, increase us  [ but no flow-on! ]

-  for wall prefabs and closets in outdoor rooms, ones facing a
   certain direction should use "shadow" light value as ambient

-  for joiners and doors/windows : pick a value roughly between
   the two sides.  E.g. if diff == 32, use lowest + 16
   When diff == 16, use the ENTRY side.



SINKS:

+  get them working again



CEILINGS:

-  better logic for heights

   e.g. group areas into 'floor_group' -- same floor but different
   ceiling stuff (SKY vs LIGHTS vs PLAIN) and different lighting
   but same wall decoration
   


WALLS:

+  get the decorative walls working nicely
   [ pick one per area or floor_group ]

   -  support GROUP objects in 'GROUPS' table

   -  the name is always: kind .. "_" .. groupname

   -  support "env", "theme" (etc??) fields

   -  if nothing found, fall back to non-group lookup



TRAPS:

+  monster closets which open in PREVIOUS (back-track) room
   [ visit rooms with goals in them _before_ other rooms ]

+  for each trappable item/goal in a room [ upto max of 2 ]
   decide whether to create a closet trap (using a nearby unused closets)
   or a teleport trap

+  number of traps depends heavily on ROOM.pressure

-  number of traps affected by LEV.game_along

+  get teleport traps working again
   do monster depots differently, make "shared" sector based on
   an entry area of second room in the level



STAIRS:

!!  choose prefabs earlier, probably during floor/ceil heights

   ---> in Fab_pick, support a "want_fab = name" in the reqs
        [ if that name matches all the rules, use it ]



JOINERS:

!!  choose all DOOR and JOINER prefabs earlier than now.
    e.g. during floor/ceil heights or earlier

    then for switched ones, use the "action" in the Lua definition
    as the skin.special for the SWITCH prefab

+  support joiners with a height difference


