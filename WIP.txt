
WORK IN PROGRESS
================


>>>  Sun lighting : limit to outdoor rooms (supply bboxes)
     -  add_brush ... { m="outdoor" }


>>>  Border goal pieces

(a) pick an outdoor border for level

(b) use the start / exit / item pieces properly

(c) add a height requirement



Fabricate : have 'sky_h' field in ROOM.skin (rather than special logic) ??

   -  after tizzy_up_room, transfer the value


"onion" layouting : patterns which do something to one (or more) sides
                    of a room and recurse for the remaining part



6.08 Stuff
----------

3D floors next to room with liquid -- odd gap is possible


--------->


Fix handling of gaps inside caves (at border of cave)
-  mark them in cave code, handle them in border_up code
-  "cave_wall" -- support as a low fence too ("cave_fence" ?)


Layout rework:
+  create chunks for ALL non-cave rooms

-  CHUNK_CLASS ?   put in seed.lua

-  CHUNK.content (not SEED.content)

-  link chunks together

-  create chunks for flat square room
   V
-  split big chunks: 4 = 2/2  5 = 2/1/2 or 1/3/1  6 = 2/2/2  (etc)
   (maintain symmetry if chunk straddles middle of room)

-  split any chunks which contain TWO importants or conns
   (detect if horiz or vertical, and where)

IDEA:  automatically merge 2x2 seeds (if floor) into a single chunk

-  get curved stairs working again
-  get diagonals working again

+  recursive patterns!

??  the 'is_top' pattern must touch the entry_conn (if present)

IDEA:  auto-sub-areas : in huge room, sub-divide into smaller rectangles
       and place "intra connections" between them.  Place patterns in
       each sub-area, ensuring the intra connections are "floor".


Border pieces:
+  need a 'height' field, if not high enough then skip

-  support pieces with a "purpose" (START, EXIT, ITEM)

-  only 25% chance of corner cage [apply style]


Bridges:
-  have an actual bridge [Urban theme]
-  bridges : check two/three seeds for LONG bridges
-  add mon/item spots to prefabs


Junking:
-  caves: sometimes junk a side or two
   - only at edge of map (?)
   - 1 or 2 seeds deep

-  normal junking : upto 2 seeds at edge of map


Closets and Traps:
-  can use unused seeds [inside map area]
-  can use junked parts of a room
-  can use a SOLID seed in a pattern (c.f. cage code)

-  can steal part of a nearby scenic, but require all three sides
   (and two diagonals) to remain part of scenic room


Doors
-  Door_with_bars : use it
+  make a dark-metal switch for Door_with_bars
-  make a two seed wide door prefab
-  support wide doors [normal / locked]
-  make wide prefab with a switch in it [normal door]
-  texturing on door prefabs (for HELL, URBAN themes)


Cave lighting:
-  keys / switches (etc) should be lit up


MISCELLANEA
===========

-  "outside bbox" pieces via sector type #987


RAIL ISSUE : cannot control offsets on BACK SIDE of a brush vert
--->  test new logic....


Fences : support dropping them between rooms  [ i.e. honor STYLE ]


wad-fab loader : x_offset handling not right (if line is split)


???  last_file stuff?  Default_location??

