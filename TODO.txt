
OBLIGE TODO
===========

Current Work
------------

Hallways:

-  definition: a bunch of segments which connect to rooms,
               and can act as the SRC or DEST of a CONN object
               (rename R1/R2 --> L1/L2 for "location")

-  LEVEL.halls

-  test_direct_branch : don't handle "off_hall" case, do that in
                        hallway code.

-  test_direct_branch : annex the section here?


>>>>  new connection logic

   HAVE : LEVEL.best_conn
   each hallway will test if score > best_conn.score (update it)
   direct, crossover and off_hall also work that way (update best_conn)

+  double hallway : can be L shape (not just U shape)

-  need PARAM.bridges [as a way to allow bridge prefab list in
     DOOM themes even though only certain engines support it]


IDEA 2: generalise normal, big and cycle branch creation into a
        single system which just scan sections.


WISH: Connect: support branching out from any section (reclaimed juncs)

     HOWEVER: low score if enters/exits a room at a "section corner"
              (i.e. junction touches 2+ sections of the room)



IDEA: don't decide "big junctions" in planner, instead when all the
      connections are made (+ quests + cycles) look for small rooms
      which can be turned into junctions.

      --> NO : instead give outward conns which join / go through
               a big junction a really high score


Crossovers:
  !!  put stairs in the mini-hallways  [Cycles too]

   +  build the bridges / channels using prefabs

DONE: controlled via STYLES (also check: PARAM.bridges)

   -  fix hallway vertical gaps

   TEST: spot_for_wotsit: ignore/handle crossover chunk 

   WISH: make a moving train in Quake 1/2 maps
   WISH: pillars holding up the bridge
   WISH: bridges which increase height (e.g. stair in middle)
   WISH: channels which decrease height
   WISH: try to create through a reclaimed joiner (middle of CCC etc)
   WISH: give AREAS near incompatible height a 'target_h' field
 

Connect:

DONE: remove branch_small_rooms : just use "emergency" system


Hallways:
   +  create them again, want ability to start at a given
      section and dir and return list of possible hallways

  !!  allow rooms to connect to existing hallway
      (prevent the isolated room problem)

   -  create the double penetration hallway

Big junctions:
   +  much more likely if small (e.g. 2x2)
   -  often use them for 90 degree stalks : even in corner of map


Cycles:
   +  less chance if R2 (middle room) is large

DONE: prevent using section next door to existing conn & same direction
      [maybe prevent same dir altogether except in "heaps"]

WISH: if an area touches, try to choose a compatible height
      ---> target_h field in AREA class


Stairs:
  +  fix ability to go from A2 --> A1
     (in other words: ability for stair chunk to be in unset floor)



++  create AUTHORS.txt / simplify Credits web page

++  some VOID and LIQUID areas
    [void requires 6x6 surrounding non-void room and must not
     touch scenic chunks]

++  LOGO pictures on indoor walls (DOOM format games)


!!!  the "apply twice" problem in prefab build code


WISH: 3D bridges can be 3D stairs [relax area touching rule]



FIX: areas may be separated by "scenic" chunks
     --> prevent that, c.f. sub-room logic in V3


Windows: MUST decide them after all heights are done



5. corner prefab -- chunk is assumed not to be passable anymore,
   can make the whole thing solid [c.f. the V3 corner seeds]
   or make a curve or diagonal -- anything a prefab can do.
   
   need to make sure that room stays traversible

6. wall prefab -- touches one (and only one) edge of room,
   could make whole thing solid, or whatever a prefab can do.

7. big middle prefab, e.g. nukage pit



>>>  Simple rooms (caves and mazes)


-  build all hallways AFTER all rooms
   (decide a height different first though).


OTHER STUFF

!!  u1..v2 for texture coords on brushes

    x_offset is alternate term for u1  [u2 can be absent]
    y_offset is alternate term for v1 or v2  (depends on 'peg' flag)



Goals for next WIP
==================

FOCUS WILL BE: room connection logic

+  decent hallways

+  cycles

+  crossovers

-  liquid areas



Release Goals
=============

+  working pictures

+  caves working again

+  better ceilings, some ceiling lights

-  system for texture coordinates


-  windows

-  normal doors

-  cages

-  secret niches


?  better exits

?  diagonal corners

?  teleporters

